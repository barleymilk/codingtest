# 자바스크립트란?

## 정의
자바스크립트는 '웹페이지에 생동감을 불어넣기 위해' 만들어진 프로그래밍 언어이다.<br>
자바스크립트로 작성한 프로그램을 스크립트(script)라고 부른다.<br>
스크립트는 웹페이지의 HTML 안에 작성할 수 있는데, 웹페이지를 불러올 때 스크립트가 자동으로 실행된다.<br>

> ### 왜 자바스크립트일까?
> 처음 자바스크립트가 만들어졌을 때는 'LiveScript'라는 이름으로 불렸다. 그런데 당시, 자바의 인기가 아주 높았기 때문에 마케팅 차원에서 이름을 자바스크립트로 바꾸었다. (자바와는 아무 연관이 없다.)

자바스크립트는 브라우저뿐만 아니라 서버에서도 실행할 수 있다. 그 외에도 자바스크립트 엔진이라 불리는 특별한 프로그램이 들어 있는 모든 디바이스에서도 동작한다. <br>
브라우저에는 '자바스크립트 가상 머신'이라 불리는 엔진이 내장되어 있다. <br>

<br>

## 엔진
엔진의 종류는 다양한데, 엔진마다 특유의 코드네임이 있다.
- V8: Chrome과 Opera에서 쓰임
- SpiderMonkey: Firefox에서 쓰임
- IE는 버전에 따라 'Trident'나 'Chakra'라 불리는 엔진을 사용 
- 'ChakraCore': Microsoft Edge에서 쓰임
- 'SquirrelFish': Safari에서 쓰임

> ### 엔진은 어떻게 동작하지?
> 기본 원리는 다음과 같다.
> 1. 엔진이 스크립트를 읽는다.(파싱)
> 2. 읽어 들인 스크립트를 **기계어로 전환**한다. (컴파일)
> 3. 기계어로 전환한 코드가 실행된다.
> 엔진은 프로세스 각 단계마다 최적화를 진행한다. 또한, 컴파일이 끝나고 실행 중인 코드를 감시하면서, 이 코드로 흘러가는 데이터를 분석하고, 분석 결과를 토대로 기계어로 전환된 코드를 다시 최적화하기도 한다. 이러한 과정을 통해 스크립트 실행 속도가 더욱 빨라진다.

<br>

## 브라우저에서 할 수 있는 일😊
브라우저 환경에선 웹페이지 조작, 클라이언트와 서버의 상호작용에 관한 모든 일을 할 수 있다.
- 페이지에 새로운 HTML 추가, 기존 HTML 혹은 스타일 수정
- 마우스 클릭이나 포인터의 움직임, 키보드 키 눌림 등과 같은 사용자 행동에 반응
- 네트워크를 통해 원격 서버에 요청을 보내거나, 파일 다운로드, 업로드하기(AJAX나 COMET과 같은 기술 사용)
- 쿠키를 가져오거나 설정, 사용자에게 질문하거나 메시지 보여주기
- 클라이언트 측에 데이터 저장(로컬 스토리지)

## 브라우저에서 할 수 없는 일😒
브라우저는 보안을 위해 자바스크립트의 기능에 제약을 걸어놓았다. 이런 제약은 악성 웹페이지가 개인 정보에 접근하거나 사용자의 데이터를 손상하는 것을 막기 위해 만들어졌다.
- 웹페이지 내 스크립트는 디스크에 저장된 임의의 파일을 읽거나 쓰고, 복사하거나 실행할 때 제약을 받을 수 있다. 운영체제가 지원하는 기능을 브라우저가 직접 쓰지 못하게 막혀있기 때문이다. <br> 사용자가 브라우저 창에 파일을 '끌어다 두거나' `<input>`태그를 통해 파일을 선택할 때와 같이 특정 상황에서만 파일 접근을 허용한다. <br> 카메라나 마이크 같은 디바이스와 상호작용하려면 사용자의 명시적인 허가가 있어야 한다. 자바스크립트가 활성화된 페이지라도 사용자 몰래 웹 카메라를 작동시켜 수집한 정보를 국가안보국(NSA)과 같은 곳에 몰래 전송할 수 없다. 
- 브라우저 내 탭과 창은 대개 서로의 정보를 알 수 없다. 그러나 자바스크립트를 사용해 한 창에서 다른 창을 열 때는 예외가 적용된다. 하지만, 이 경우에도 도메인이나 프로토콜, 포트가 다르다면 페이지에 접근할 수 없다. <br>이런 제약사항을 '동일 출처 정책(Same Origin Policy)'이라 부른다. 이 정책을 피하려면 두 페이지는 데이터 교환에 동의해야 하고, 동의와 관련된 특수한 자바스크립트 코드를 포함하고 있어야 한다.<br>이런 제약사항은 사용자의 보안을 위해 만들어졌다. `http://anysite.com`에서 받아온 페이지가 `http://gmail.com`에서 받아온 페이지 상의 정보에 접근해 중요한 개인정보를 훔치는 걸 막기 위해서다.
- 자바스크립트를 이용하면 페이지를 생성한 서버와 쉽게 정보를 주고받을 수 있다. 하지만 타사이트나 도메인에서 데이터를 받아오는 건 불가능하다. 가능하다고 해도 원격 서버에서 명확히 승인을 해줘야 한다.(HTTP 헤더 등을 이용)
